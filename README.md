# Бот-рассылка в VK

###### Разработала [**Karina Gordeeva**](https://github.com/gkar1na).

### Файл .env

Перед нужно создать файл `.env`, куда впоследствии необходимо записывать переменные. Путь к файлу `.env` нужно прописать
в файле `config.py` в переменную `env_file`. Названия читаемых переменных должны начинаться с префикса, который
указывается в файле `config.py` в переменной `env_prefix`.

В файле `.env` необходимо указать значение следующих переменных (вводить в одну строку или ставить двойные кавычки):

`{env_prefix}VK_BOT_TOKEN={vk_bot_token}`

`{env_prefix}DELAY={delay}`

`{env_prefix}STEPS={steps}`

`{env_prefix}TEXTS={texts}`

`{env_prefix}COMMANDS={commands}`

`{env_prefix}UNREAD_MESSAGE_TEXT={unread_message_text}`

`{env_prefix}MY_VK_ID={vk_user_id}`

`{env_prefix}DB_PATH={db_type}://{user_name}:{user_password}@{host}:{port}/{path_to_db}`

### Описание переменных:

- **vk_bot_token** - токен с доступом к фото и сообщениям. Его нужно создать. Для этого нужно зайти в группу, в "
  Управление" -> "Работа с API" -> "Создать ключ" -> Выбрать фото и сообщения -> "Создать". После этого подтвердить
  создание ключа. Скопировать и вставить в переменную.

- **delay** - время задержки после отправки сообщения (защита от перегруза). Пример: _0.1_

- **steps** - список словарей с данными для создания записей в таблице Step (записывается в 1 строку).
  Пример: _[{"number":1},{"name":"название1"},{"number":2},{"name":"название2"}]_

- **texts** - список словарей с данными для создания записей в таблице Text (записывается в 1 строку).
  Пример: _[{"title":"название1","text":"текст","step":1},{"title":"название 2","text":"текст 2","step":2}]_

- **commands** - список словарей с данными для создания записей в таблице Command (записывается в 1 строку). Пример: _[
  {"name":"название1","admin":true,"arguments":["объяснение смысла аргумента 1","объяснение смысла аргумента 2"]},{"
  name":"название2","admin":false,"arguments":[]}]_

- **unread_message_text** - текст, который отправлять в непрочитанные диалоги при запуске бота (записывается в 1 строку)
  . Пример: _Привет! Сообщение не обработалось :(_

- **vk_user_id** - айди пользователя в ВК, которому будут отправляться информационные сообщения. Его можно получить,
  зайдя в свой аккаунт с компьютера и открыв диалог с этим человеком. Его (или ваш) айди будет записан в адресной строке
  браузера после "sel=".

- **db_type** - тип БД. Пример: _postgresql_

- **user_name** - имя пользователя, у которого есть доступ к редактированию БД (создание, редактирование и удаление
  таблиц).

- **user_password** - пароль от пользователя БД.

- **host** - хост, на котором создана БД (для sqlite после "@" пишется сразу путь к файлу БД, без host и port).
  Пример: _localhost_

- **port** - порт, на котором создана БД. Пример: _5432_

- **path_to_db** - путь до БД на сервере (для sqlite путь к файлу БД).

### Запуск

После всей описанной настройки нужно запустить файл `bot.py`. Для этого нужно перейти в директорию `app` и ввести
команду `python3 bot.py`, после чего при правильном вводе данных в БД будут созданы таблицы со стандартными данными, а
бот начнет функционировать.

###### © [Karina Gordeeva](https://github.com/gkar1na)
